<div class="container">
    <div class="row mt-4">
        <div class="col-12 text-center">
            <a href="{% url 'dashboard-hacer-pedido' %}" class="btn btn-lg text-white" style="background-color: #2E8B57;">Hacer Pedido</a>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header text-white" style="background-color: #2E8B57;">
                    Historial de Pedidos
                </div>
                <div class="card-body">
                    {% if pedidos %}
                        <table class="table bg-white">
                            <thead class="text-white" style="background-color: #2E8B57;">
                                <tr>
                                    <th scope="col">ID Pedido</th>
                                    <th scope="col">Productos</th>
                                    <th scope="col">Fecha</th>
                                    <th scope="col">Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for pedido in pedidos %}
                                <tr>
                                    <td>{{ pedido.numero_pedido }}</td>
                                    <td>
                                        {% for detalle in pedido.detalles.all %}
                                            {{ detalle.producto.nombre }} ({{ detalle.producto.categoria }}) - x{{ detalle.cantidad }}<br>
                                        {% endfor %}
                                    </td>
                                    <td>{{ pedido.fecha|date:"d/m/Y" }}</td>
                                    <td>
                                        <a 
                                            href="{% url 'dashboard-pedido-detalles' pedido.id %}" 
                                            class="btn btn-info btn-sm">
                                            Ver
                                        </a>
                                        <form 
                                            method="GET" 
                                            action="{% url 'dashboard-pedido-delete' pedido.id %}" 
                                            class="d-inline">
                                            <button 
                                                type="submit" 
                                                class="btn btn-danger btn-sm">
                                                Cancelar Pedido
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <p class="text-center text-muted">No hay pedidos registrados.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
